<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kippen Klikker</title>
    <style>
      :root {
        --bg-1: #f7f1e7;
        --bg-2: #ffe8cc;
        --ink: #2b2b2b;
        --accent: #d96c06;
        --accent-2: #3b7d4a;
        --panel: #fff7ed;
        --panel-border: #f0d9b5;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Trebuchet MS", "Segoe UI", sans-serif;
        color: var(--ink);
        background: radial-gradient(circle at top, var(--bg-2), var(--bg-1));
        min-height: 100vh;
      }

      .page {
        display: grid;
        grid-template-columns: minmax(260px, 1fr) minmax(320px, 1.2fr);
        gap: 20px;
        padding: 20px;
      }

      header {
        grid-column: 1 / -1;
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        align-items: center;
        padding: 10px 20px;
        background: linear-gradient(135deg, #fffaf2, #ffe8c7);
        border: 2px solid var(--panel-border);
        border-radius: 16px;
        gap: 12px;
      }

      header h1 {
        margin: 0;
        font-size: 40px;
        letter-spacing: 1px;
        font-family: "Pricedown", "Impact", "Arial Black", "Trebuchet MS", sans-serif;
        text-transform: uppercase;
        text-shadow: 0 3px 0 rgba(0, 0, 0, 0.25);
      }

      .header-logo {
        width: 100%;
        height: 160px;
        object-fit: contain;
        justify-self: center;
        filter: drop-shadow(0 6px 6px rgba(0, 0, 0, 0.25));
      }

      .stats {
        display: grid;
        gap: 8px;
        text-align: right;
        font-size: 16px;
      }

      .panel {
        background: var(--panel);
        border: 2px solid var(--panel-border);
        border-radius: 16px;
        padding: 16px;
      }

      .farms {
        display: grid;
        gap: 12px;
      }

      .farm-yard {
        position: relative;
        height: 160px;
        border-radius: 14px;
        border: 2px solid var(--panel-border);
        background: linear-gradient(180deg, #dff2c9 0%, #c7e6a5 100%);
        overflow: hidden;
      }

      .farm-yard::after {
        content: "";
        position: absolute;
        bottom: 14px;
        left: 8%;
        width: 84%;
        height: 10px;
        background: repeating-linear-gradient(
          90deg,
          rgba(0, 0, 0, 0.15) 0 18px,
          rgba(0, 0, 0, 0) 18px 32px
        );
        border-radius: 999px;
      }

      .farm-grid {
        position: absolute;
        inset: 12px;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(58px, 1fr));
        gap: 10px;
        align-content: start;
      }

      .farm {
        position: relative;
        width: 58px;
        height: 46px;
        background: #f2e5c9;
        border: 2px solid #c8a874;
        border-radius: 6px;
        box-shadow: inset 0 -6px 0 rgba(0, 0, 0, 0.08);
      }

      .farm::before {
        content: "";
        position: absolute;
        left: -2px;
        right: -2px;
        top: -12px;
        height: 18px;
        background: #b05b3b;
        border: 2px solid #8e452b;
        border-bottom: none;
        clip-path: polygon(0 100%, 50% 0, 100% 100%);
        border-radius: 6px 6px 0 0;
      }

      .farm::after {
        content: "";
        position: absolute;
        width: 10px;
        height: 16px;
        background: #b07a44;
        bottom: 6px;
        left: 8px;
        border: 2px solid #8a5a2e;
        border-radius: 2px;
      }


      .kfc {
        position: relative;
        width: 62px;
        height: 48px;
        background: #fff4f4;
        border: 2px solid #d66b6b;
        border-radius: 6px;
        box-shadow: inset 0 -6px 0 rgba(0, 0, 0, 0.08);
      }

      .kfc::before {
        content: "";
        position: absolute;
        left: -2px;
        right: -2px;
        top: -12px;
        height: 18px;
        background: #c61f1f;
        border: 2px solid #9f1717;
        border-bottom: none;
        border-radius: 6px 6px 0 0;
      }

      .kfc::after {
        content: "KFC";
        position: absolute;
        left: 10px;
        top: 6px;
        font-size: 10px;
        font-weight: 700;
        color: #c61f1f;
      }



      .pulse {
        animation: pulse 0.4s ease;
      }

      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.06); }
        100% { transform: scale(1); }
      }

      .hit-flash {
        animation: hit-flash 0.25s ease;
      }

      @keyframes hit-flash {
        0% { filter: brightness(1); }
        50% { filter: brightness(1.5); }
        100% { filter: brightness(1); }
      }

      .coin-burst {
        position: absolute;
        font-size: 14px;
        color: #d96c06;
        font-weight: 700;
        pointer-events: none;
        animation: coin-pop 0.6s ease-out forwards;
      }

      .spend-float {
        position: absolute;
        font-size: 14px;
        color: #ff6b6b;
        font-weight: 700;
        pointer-events: none;
        animation: coin-pop 0.6s ease-out forwards;
      }

      @keyframes coin-pop {
        0% { transform: translateY(0) scale(0.9); opacity: 0; }
        30% { opacity: 1; }
        100% { transform: translateY(-16px) scale(1.1); opacity: 0; }
      }

      .smoke {
        position: absolute;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(200,200,200,0.9), rgba(200,200,200,0));
        animation: smoke 1.2s ease-out forwards;
        pointer-events: none;
      }

      @keyframes smoke {
        0% { transform: translateY(0) scale(0.7); opacity: 0.9; }
        100% { transform: translateY(-24px) scale(1.6); opacity: 0; }
      }

      .clicker {
        display: grid;
        gap: 14px;
      }

      .clicker button {
        appearance: none;
        border: none;
        background: var(--accent);
        color: white;
        padding: 14px 18px;
        border-radius: 12px;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.08s ease, box-shadow 0.08s ease;
        box-shadow: 0 6px 0 #b65700;
      }

      #click-btn .rainbow-text {
        display: inline-block;
        color: transparent;
        background: linear-gradient(
          120deg,
          #ff2a2a,
          #ff8a00,
          #ffe400,
          #3cff57,
          #3cc7ff,
          #7a5cff,
          #ff2ad4,
          #ff2a2a
        );
        background-size: 400% 400%;
        animation: rainbow-cycle 6s linear infinite;
        -webkit-background-clip: text;
        background-clip: text;
      }

      .clicker button:active {
        transform: translateY(4px);
        box-shadow: 0 2px 0 #b65700;
      }

      @keyframes rainbow-cycle {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .clicker .subtext {
        font-size: 14px;
        color: #5a534a;
      }

      .field {
        position: relative;
        height: 360px;
        overflow: hidden;
        border-radius: 16px;
        border: 2px solid var(--panel-border);
        background: linear-gradient(180deg, #cfe9ff 0%, #cfe9ff 45%, #c8f7c5 45%, #b4e7a8 100%);
      }

      .field::after {
        content: "";
        position: absolute;
        left: 10%;
        bottom: 20px;
        width: 80%;
        height: 6px;
        background: repeating-linear-gradient(
          90deg,
          rgba(0, 0, 0, 0.15) 0 18px,
          rgba(0, 0, 0, 0) 18px 32px
        );
        border-radius: 999px;
      }

      .chicken {
        position: absolute;
        bottom: 24px;
        left: -80px;
        width: 70px;
        height: 50px;
        animation: run 3.5s linear forwards;
        display: grid;
        grid-template-columns: 1fr 26px;
        align-items: center;
      }

      .meth-chicken {
        filter: drop-shadow(0 0 8px rgba(0, 255, 255, 0.6));
        animation-timing-function: linear;
        animation-name: meth-run;
        animation-duration: var(--meth-duration, 1.5s);
      }

      .meth-chicken .body {
        animation: hue-spin 0.9s linear infinite;
        background: linear-gradient(135deg, #9cff57, #57d7ff);
      }

      @keyframes meth-run {
        0% {
          transform: translateX(0);
        }
        45% {
          transform: translateX(var(--target-x, 140px));
        }
        75% {
          transform: translateX(var(--target-x, 140px));
        }
        100% {
          transform: translateX(calc(100vw + 200px));
        }
      }

      @keyframes hue-spin {
        0% {
          filter: hue-rotate(0deg);
        }
        100% {
          filter: hue-rotate(360deg);
        }
      }

      .chicken .body {
        width: 46px;
        height: 34px;
        border-radius: 20px;
        background: #fff;
        border: 2px solid #e4d9c7;
        position: relative;
      }

      .chicken .body::before {
        content: "";
        position: absolute;
        width: 14px;
        height: 14px;
        background: #ff5b5b;
        border-radius: 50%;
        left: 5px;
        top: -6px;
      }

      .chicken .body::after {
        content: "";
        position: absolute;
        width: 6px;
        height: 6px;
        background: #2b2b2b;
        border-radius: 50%;
        right: 6px;
        top: 9px;
      }

      .chicken.prestige-1 .body::before {
        box-shadow: 0 0 0 2px #f2c94c;
      }

      .chicken.prestige-1 .body::after {
        box-shadow: 0 0 0 2px #111;
      }

      .chicken.prestige-1::before {
        content: "";
        position: absolute;
        width: 26px;
        height: 6px;
        background: #f2c94c;
        border-radius: 999px;
        left: 10px;
        bottom: 4px;
        box-shadow: 0 0 6px rgba(242, 201, 76, 0.7);
      }

      .chicken.prestige-1::after {
        content: "";
        position: absolute;
        width: 28px;
        height: 10px;
        background: #111;
        border-radius: 6px;
        left: 12px;
        top: 10px;
        box-shadow: 0 0 6px rgba(0, 0, 0, 0.4);
      }

      .chicken .beak {
        width: 0;
        height: 0;
        border-top: 8px solid transparent;
        border-bottom: 8px solid transparent;
        border-left: 16px solid #f4a100;
      }

      @keyframes run {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(calc(100vw + 200px));
        }
      }

      .wolf {
        position: absolute;
        left: 0;
        bottom: 26px;
        width: 190px;
        height: 110px;
        display: block;
        will-change: left;
        --dir: 1;
      }

      .wolf .wolf-sprite {
        position: absolute;
        inset: 0;
        transform-origin: 70% 70%;
        transform: scaleX(var(--dir));
      }

      .wolf .ui {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .wolf[data-dir="right"] .ui {
        transform: scaleX(-1);
      }

      .wolf[data-dir="left"] .ui {
        transform: scaleX(1);
      }

      .wolf .body {
        position: absolute;
        left: 44px;
        bottom: 26px;
        width: 110px;
        height: 52px;
        background: linear-gradient(145deg, #6d6d6d, #4b4b4b);
        border: 3px solid #2f2f2f;
        border-radius: 18px 24px 20px 20px;
        box-shadow: inset -10px -6px 0 rgba(0, 0, 0, 0.2);
      }

      .wolf .shoulder {
        position: absolute;
        left: 34px;
        bottom: 32px;
        width: 28px;
        height: 34px;
        background: #3f3f3f;
        border-radius: 10px;
        border: 2px solid #2b2b2b;
      }

      .wolf .head {
        position: absolute;
        left: 0;
        bottom: 42px;
        width: 70px;
        height: 34px;
        background: #4a4a4a;
        border: 3px solid #2f2f2f;
        border-radius: 8px 12px 10px 8px;
      }

      .wolf .snout {
        position: absolute;
        left: -10px;
        bottom: 46px;
        width: 34px;
        height: 18px;
        background: #2d2d2d;
        border: 2px solid #1f1f1f;
        border-radius: 6px;
      }

      .wolf .ear {
        position: absolute;
        width: 16px;
        height: 20px;
        background: #2f2f2f;
        top: 18px;
        left: 16px;
        transform: rotate(-10deg);
        border-radius: 4px 4px 10px 10px;
      }

      .wolf .ear.right {
        left: 36px;
        transform: rotate(18deg);
      }

      .wolf .eye {
        position: absolute;
        width: 6px;
        height: 6px;
        background: #f5e8d0;
        border-radius: 50%;
        left: 40px;
        bottom: 58px;
      }

      .wolf .fang {
        position: absolute;
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-top: 10px solid #f2f2f2;
        left: 4px;
        bottom: 42px;
      }

      .wolf .tail {
        position: absolute;
        width: 46px;
        height: 16px;
        background: #4a4a4a;
        left: 150px;
        bottom: 52px;
        border-radius: 10px;
        transform: rotate(12deg);
        border: 2px solid #2f2f2f;
      }

      .wolf .leg {
        position: absolute;
        width: 14px;
        height: 30px;
        background: #2f2f2f;
        bottom: 6px;
        border-radius: 4px;
      }

      .wolf .leg.front {
        left: 58px;
      }

      .wolf .leg.front.back {
        left: 78px;
        height: 26px;
        background: #3a3a3a;
      }

      .wolf .leg.rear {
        left: 120px;
        height: 28px;
      }

      .wolf .leg.rear.back {
        left: 138px;
        height: 24px;
        background: #3a3a3a;
      }
      }

      .wolf .label {
        position: absolute;
        top: -26px;
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 999px;
        background: #3c3c3c;
        color: #fff;
      }

      .wolf .health {
        position: absolute;
        bottom: -14px;
        width: 110px;
        height: 8px;
        background: #f1d1d1;
        border-radius: 999px;
        overflow: hidden;
      }

      .wolf .health span {
        display: block;
        height: 100%;
        background: #e04b4b;
        width: 100%;
      }

      .wolf.attack .wolf-sprite {
        animation: lunge 0.55s cubic-bezier(0.2, 0.8, 0.2, 1);
      }

      @keyframes lunge {
        0% {
          transform: translateX(0) scale(1) scaleX(var(--dir));
        }
        35% {
          transform: translateX(-26px) scale(1.05) rotate(-1deg) scaleX(var(--dir));
        }
        70% {
          transform: translateX(-40px) scale(1.02) scaleX(var(--dir));
        }
        100% {
          transform: translateX(0) scale(1) scaleX(var(--dir));
        }
      }

      .dust {
        position: absolute;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(197, 175, 139, 0.9), rgba(197, 175, 139, 0));
        pointer-events: none;
        animation: puff 0.6s ease-out forwards;
      }

      @keyframes puff {
        0% {
          transform: scale(0.5);
          opacity: 0.9;
        }
        100% {
          transform: scale(2.2) translateY(-6px);
          opacity: 0;
        }
      }

      .pig {
        position: absolute;
        left: 0;
        bottom: 110px;
        width: 170px;
        height: 90px;
        display: block;
        --dir: 1;
      }

      .pig .pig-sprite {
        position: absolute;
        inset: 0;
        transform-origin: 40% 70%;
        transform: scaleX(var(--dir));
      }

      .pig .ui {
        position: absolute;
        inset: 0;
        pointer-events: none;
      }

      .pig[data-dir="right"] .ui {
        transform: scaleX(-1);
      }

      .pig[data-dir="left"] .ui {
        transform: scaleX(1);
      }

      .pig .body {
        position: absolute;
        left: 38px;
        bottom: 22px;
        width: 120px;
        height: 52px;
        background: linear-gradient(160deg, #f4b7b7, #e38f8f);
        border: 3px solid #c97070;
        border-radius: 28px;
        box-shadow: inset -10px -6px 0 rgba(0, 0, 0, 0.12);
      }

      .pig .head {
        position: absolute;
        left: 4px;
        bottom: 34px;
        width: 56px;
        height: 40px;
        background: #eaa2a2;
        border: 3px solid #c97070;
        border-radius: 18px;
      }

      .pig .snout {
        position: absolute;
        left: 10px;
        bottom: 42px;
        width: 26px;
        height: 18px;
        background: #d77b7b;
        border: 2px solid #b86262;
        border-radius: 10px;
      }

      .pig .snout::before,
      .pig .snout::after {
        content: "";
        position: absolute;
        top: 6px;
        width: 4px;
        height: 6px;
        background: #8f4a4a;
        border-radius: 2px;
      }

      .pig .snout::before {
        left: 6px;
      }

      .pig .snout::after {
        right: 6px;
      }

      .pig .ear {
        position: absolute;
        width: 14px;
        height: 18px;
        background: #e18f8f;
        top: 20px;
        left: 16px;
        border-radius: 4px 4px 8px 8px;
        transform: rotate(-10deg);
        border: 2px solid #c97070;
      }

      .pig .ear.right {
        left: 34px;
        transform: rotate(12deg);
      }

      .pig .eye {
        position: absolute;
        width: 5px;
        height: 5px;
        background: #3a2a2a;
        border-radius: 50%;
        left: 42px;
        bottom: 58px;
      }

      .pig .leg {
        position: absolute;
        width: 12px;
        height: 22px;
        background: #c97070;
        bottom: 8px;
        border-radius: 4px;
      }

      .pig .leg.front {
        left: 60px;
      }

      .pig .leg.front.back {
        left: 78px;
        height: 20px;
        background: #b86262;
      }

      .pig .leg.rear {
        left: 118px;
        height: 20px;
      }

      .pig .leg.rear.back {
        left: 134px;
        height: 18px;
        background: #b86262;
      }

      .pig .label {
        position: absolute;
        top: -26px;
        right: 6px;
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 999px;
        background: #8f4a4a;
        color: #fff;
      }

      .pig .health {
        position: absolute;
        bottom: -14px;
        width: 110px;
        height: 8px;
        right: 6px;
        background: #f1d1d1;
        border-radius: 999px;
        overflow: hidden;
      }

      .pig .health span {
        display: block;
        height: 100%;
        background: #c04848;
        width: 100%;
      }

      .pig.attack .pig-sprite {
        animation: pig-lunge 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
      }

      @keyframes pig-lunge {
        0% {
          transform: translateX(0) scale(1) scaleX(var(--dir));
        }
        50% {
          transform: translateX(-34px) scale(1.04) rotate(1deg) scaleX(var(--dir));
        }
        100% {
          transform: translateX(0) scale(1) scaleX(var(--dir));
        }
      }

      .rat {
        position: absolute;
        bottom: 18px;
        left: 40%;
        width: 240px;
        height: 140px;
        display: none;
        z-index: 2;
      }
      .rat.active {
        display: block;
      }
      .rat .rat-body {
        position: relative;
        width: 220px;
        height: 120px;
        margin: 0 auto;
        border-radius: 70px;
        background: linear-gradient(180deg, #5b4d44, #3a302b);
        box-shadow: inset 0 -10px 0 rgba(0, 0, 0, 0.25), 0 10px 18px rgba(0, 0, 0, 0.35);
      }
      .rat .rat-head {
        position: absolute;
        right: -10px;
        top: 26px;
        width: 90px;
        height: 70px;
        border-radius: 50px;
        background: linear-gradient(180deg, #6a5a52, #3e352f);
      }
      .rat .rat-eye {
        position: absolute;
        right: 18px;
        top: 20px;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: #ff2d2d;
        box-shadow: 0 0 8px rgba(255, 0, 0, 0.8);
      }
      .rat .rat-eye.left {
        right: 38px;
      }
      .rat .rat-eye.right {
        right: 18px;
      }
      .rat[data-dir="left"] {
        transform: scaleX(-1);
      }
      .rat[data-dir="left"] .ui {
        transform: scaleX(-1);
      }
      .rat .rat-ear {
        position: absolute;
        top: 6px;
        right: 50px;
        width: 22px;
        height: 22px;
        border-radius: 50%;
        background: #806b61;
      }
      .rat .rat-tail {
        position: absolute;
        left: -60px;
        top: 60px;
        width: 80px;
        height: 16px;
        border-radius: 999px;
        background: linear-gradient(90deg, #8d6a5a, #5d4037);
        transform: rotate(-12deg);
      }
      .rat .ui {
        position: absolute;
        left: 16px;
        top: -22px;
        background: rgba(0, 0, 0, 0.55);
        color: #fff;
        padding: 4px 8px;
        border-radius: 10px;
        font-size: 12px;
      }
      .rat .health {
        margin-top: 4px;
        width: 120px;
        height: 6px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 999px;
        overflow: hidden;
      }
      .rat .health span {
        display: block;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #ff2d2d, #ff8a00);
      }

      .rat-laser {
        position: absolute;
        height: 4px;
        background: linear-gradient(90deg, rgba(255, 60, 60, 0.2), #ff2d2d, #ff7a7a);
        box-shadow: 0 0 10px rgba(255, 40, 40, 0.9);
        border-radius: 999px;
        transform-origin: left center;
        animation: rat-laser 0.18s ease-out forwards;
        z-index: 3;
      }
      @keyframes rat-laser {
        0% {
          transform: scaleX(0.1);
          opacity: 0.2;
        }
        100% {
          transform: scaleX(1);
          opacity: 1;
        }
      }

      .rat-trigger {
        margin-top: 10px;
        padding: 10px 14px;
        border-radius: 10px;
        border: 2px solid #b52b2b;
        background: #3a0d0d;
        color: #ffd6d6;
        font-weight: 700;
        cursor: pointer;
      }
      .rat-trigger:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .boss-warning {
        position: fixed;
        top: 18%;
        left: 50%;
        transform: translateX(-50%);
        font-size: clamp(36px, 6vw, 96px);
        font-weight: 900;
        color: #ff1e1e;
        text-shadow: 0 0 12px rgba(255, 30, 30, 0.85), 0 0 24px rgba(255, 80, 80, 0.6);
        letter-spacing: 4px;
        z-index: 9999;
        pointer-events: none;
        opacity: 0;
        animation: boss-warning 1.2s ease-in-out forwards;
      }
      @keyframes boss-warning {
        0% { opacity: 0; transform: translateX(-50%) scale(0.8); }
        10% { opacity: 1; transform: translateX(-50%) scale(1.08); }
        70% { opacity: 1; transform: translateX(-50%) scale(1.05); }
        100% { opacity: 0; transform: translateX(-50%) scale(1.2); }
      }

      .confetti {
        position: fixed;
        top: -10px;
        width: 10px;
        height: 14px;
        z-index: 9999;
        pointer-events: none;
        animation: confetti-fall 2.4s ease-in forwards;
      }
      @keyframes confetti-fall {
        0% {
          transform: translateY(-20px) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(110vh) rotate(720deg);
          opacity: 0.9;
        }
      }

      .turret {
        position: absolute;
        bottom: 30px;
        width: 44px;
        height: 40px;
        border-radius: 10px;
        background: #7a5b2e;
        border: 2px solid #5c431f;
        display: grid;
        place-items: center;
      }

      .turret::before {
        content: "";
        width: 24px;
        height: 8px;
        background: #3b2a12;
        border-radius: 999px;
      }


      .turret .health {
        position: absolute;
        top: -8px;
        left: -2px;
        width: 48px;
        height: 6px;
        background: #f1d1d1;
        border-radius: 999px;
        overflow: hidden;
      }

      .turret .health span {
        display: block;
        height: 100%;
        background: #3b7d4a;
        width: 100%;
      }

      .bullet {
        position: absolute;
        width: 10px;
        height: 4px;
        background: #2b2b2b;
        border-radius: 4px;
        box-shadow: 0 0 6px rgba(0, 0, 0, 0.25);
        animation: bullet-fly 0.35s linear forwards;
      }

      @keyframes bullet-fly {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(180px);
          opacity: 0;
        }
      }

      .upgrades {
        display: grid;
        gap: 12px;
      }

      .upgrade {
        display: grid;
        gap: 6px;
        padding: 12px;
        border-radius: 12px;
        border: 2px solid #f1d9b0;
        background: #fffdf8;
      }

      .upgrade button {
        appearance: none;
        border: 2px solid transparent;
        background: transparent;
        color: var(--accent-2);
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s ease, color 0.2s ease;
        background-image: linear-gradient(#fffdf8, #fffdf8),
          linear-gradient(90deg, #ff004c, #ff9f0a, #ffd60a, #32d74b, #0a84ff, #5e5ce6, #ff2d55);
        background-origin: border-box;
        background-clip: padding-box, border-box;
        animation: rainbow-border 3.2s linear infinite;
      }

      .upgrade button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .upgrade button:not(:disabled):hover {
        background: var(--accent-2);
        color: white;
      }

      .prestige-btn {
        border: 3px solid #d4af37;
        background: linear-gradient(135deg, #fff0b3, #d4af37 45%, #f2c94c 100%);
        color: #2b2b2b;
        font-weight: 900;
        text-transform: uppercase;
        box-shadow: 0 6px 0 #9f7a1f, 0 0 12px rgba(212, 175, 55, 0.6);
        position: relative;
        overflow: hidden;
      }

      .prestige-btn::after {
        content: "‚ô¶";
        position: absolute;
        right: 10px;
        top: 6px;
        color: #b9f2ff;
        text-shadow: 0 0 6px rgba(185, 242, 255, 0.8);
      }

      .prestige-btn::before {
        content: "";
        position: absolute;
        top: -40%;
        left: -30%;
        width: 30%;
        height: 180%;
        background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.7), transparent);
        transform: rotate(12deg);
        animation: prestige-shine 2.4s linear infinite;
      }

      @keyframes prestige-shine {
        0% { left: -40%; }
        100% { left: 120%; }
      }

      .prestige-btn:active {
        transform: translateY(4px);
        box-shadow: 0 2px 0 #b38a2e;
      }

      .spaceship-btn {
        margin-top: 10px;
        padding: 12px 20px;
        border-radius: 14px;
        border: 2px solid #2ecc71;
        background: linear-gradient(135deg, #0f3d2e, #1f8a4c);
        color: #eafff1;
        font-weight: 700;
        letter-spacing: 0.3px;
        cursor: pointer;
        box-shadow: 0 8px 18px rgba(46, 204, 113, 0.35);
        transition: transform 0.1s ease, box-shadow 0.2s ease, opacity 0.2s ease;
      }
      .spaceship-btn:disabled {
        opacity: 0.45;
        cursor: not-allowed;
        box-shadow: none;
      }
      .spaceship-btn:active {
        transform: translateY(2px);
        box-shadow: 0 5px 10px rgba(46, 204, 113, 0.25);
      }

      .rocket {
        position: fixed;
        right: 10%;
        bottom: -260px;
        width: 140px;
        height: 260px;
        z-index: 9999;
        pointer-events: none;
        animation: rocket-launch 3.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
      }
      .rocket-body {
        position: relative;
        width: 120px;
        height: 200px;
        margin: 0 auto;
        border-radius: 60px 60px 28px 28px;
        background: linear-gradient(180deg, #f6f7fb 0%, #cfd6e6 40%, #9aa7c7 100%);
        box-shadow: inset 0 -8px 0 rgba(0, 0, 0, 0.08), 0 14px 26px rgba(0, 0, 0, 0.35);
      }
      .rocket-nose {
        position: absolute;
        top: -55px;
        left: 0;
        right: 0;
        margin: 0 auto;
        width: 0;
        height: 0;
        border-left: 60px solid transparent;
        border-right: 60px solid transparent;
        border-bottom: 70px solid #ff4b5c;
        filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.25));
      }
      .rocket-window {
        position: absolute;
        top: 50px;
        left: 50%;
        transform: translateX(-50%);
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #a6ffef, #1ccfc0 60%, #0c6f73 100%);
        border: 4px solid #1f2b38;
        box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.3);
      }
      .rocket-fin {
        position: absolute;
        bottom: 12px;
        width: 40px;
        height: 60px;
        background: linear-gradient(180deg, #ff4b5c 0%, #c72f3d 100%);
      }
      .rocket-fin.left {
        left: -12px;
        border-radius: 8px 0 20px 12px;
        transform: skewY(12deg);
      }
      .rocket-fin.right {
        right: -12px;
        border-radius: 0 8px 12px 20px;
        transform: skewY(-12deg);
      }
      .rocket-flame {
        position: absolute;
        bottom: -70px;
        left: 50%;
        transform: translateX(-50%);
        width: 50px;
        height: 90px;
        background: radial-gradient(circle at 50% 20%, #fff7b0 0%, #ffd166 35%, #ff7b2a 70%, #ff3d00 100%);
        border-radius: 50% 50% 60% 60%;
        filter: blur(0.2px) drop-shadow(0 10px 20px rgba(255, 120, 0, 0.5));
        animation: flame-flicker 0.2s infinite alternate;
      }
      @keyframes flame-flicker {
        from {
          transform: translateX(-50%) scaleY(0.95);
        }
        to {
          transform: translateX(-50%) scaleY(1.05);
        }
      }
      @keyframes rocket-launch {
        0% {
          transform: translateY(0) scale(0.9);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        100% {
          transform: translateY(-130vh) scale(1.05);
          opacity: 0;
        }
      }

      .alien-chicken .body {
        background: linear-gradient(135deg, #a8ff5e, #2bdc7b);
        border-color: #1c8f52;
        box-shadow: 0 0 10px rgba(80, 255, 150, 0.55);
      }
      .alien-chicken .body::before {
        background: #7bffb5;
        box-shadow: 0 0 6px rgba(80, 255, 200, 0.8);
      }
      .alien-chicken .body::after {
        background: #0b3f1f;
      }
      .alien-chicken .beak {
        border-left-color: #7cff4f;
      }
      .alien-chicken::after {
        content: "";
        position: absolute;
        width: 18px;
        height: 4px;
        background: #7bffb5;
        border-radius: 999px;
        left: 12px;
        top: 2px;
        box-shadow: 0 0 8px rgba(120, 255, 200, 0.9);
      }

      @keyframes rainbow-border {
        0% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 200% 50%;
        }
      }

      .hint {
        font-size: 13px;
        color: #6b6358;
      }

      .danger {
        color: #b52b2b;
        font-weight: 600;
      }



                                                      

      .casino-lounge {
        grid-column: 1 / -1;
        background: radial-gradient(circle at top, #2b0a3d, #120018);
        border: 3px solid #d4af37;
        border-radius: 18px;
        padding: 18px;
        color: #f8e7b3;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.3);
      }

      .casino-lounge h2 {
        margin: 0 0 10px 0;
        font-family: "Trebuchet MS", "Impact", sans-serif;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      .casino-games {
        display: grid;
        gap: 12px;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }

      .casino-card {
        background: linear-gradient(145deg, #2a0d3e, #1b0628);
        border: 2px solid #d4af37;
        border-radius: 14px;
        padding: 12px;
      }

      .casino-card button {
        border: 2px solid #d4af37;
        background: #1f0a2d;
        color: #f8e7b3;
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: 700;
        cursor: pointer;
      }

      .casino-card button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .casino-result {
        margin-top: 8px;
        font-size: 13px;
        color: #ffe9a6;
      }

      .chip {
        display: inline-block;
        margin-left: 6px;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #d4af37;
      }


      .casino-lounge {
        grid-column: 1 / -1;
        background: radial-gradient(circle at top, #3b104f, #130018);
        border: 5px solid #d4af37;
        border-radius: 22px;
        padding: 26px;
        color: #f8e7b3;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.4);
      }

      .casino-lounge h2 {
        margin: 0 0 12px 0;
        font-family: "Trebuchet MS", "Impact", sans-serif;
        letter-spacing: 1px;
        text-transform: uppercase;
        font-size: 28px;
      }

      .casino-games {
        display: grid;
        gap: 18px;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      }

      .casino-card {
        background: linear-gradient(145deg, #2a0d3e, #1b0628);
        border: 3px solid #d4af37;
        border-radius: 18px;
        padding: 18px;
      }

      .casino-card button {
        border: 2px solid #d4af37;
        background: #1f0a2d;
        color: #f8e7b3;
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: 700;
        cursor: pointer;
      }

      .casino-card button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .casino-result {
        margin-top: 8px;
        font-size: 13px;
        color: #ffe9a6;
      }

      .chip {
        display: inline-block;
        margin-left: 6px;
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #d4af37;
      }

      .slots-visual {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
        margin: 10px 0;
        padding: 8px;
        border: 2px solid #d4af37;
        border-radius: 12px;
        background: #1a0826;
        overflow: hidden;
      }

      .slots-visual .reel {
        height: 64px;
        display: grid;
        place-items: center;
        font-size: 28px;
        background: #2a0d3e;
        border-radius: 10px;
        animation: reel-spin 1.8s linear infinite;
      }

      .slots-visual .reel:nth-child(2) {
        animation-delay: 0.2s;
      }

      .slots-visual .reel:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes reel-spin {
        0% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
        100% { transform: translateY(0); }
      }

      .roulette-visual {
        position: relative;
        height: 160px;
        margin: 12px 0;
        display: grid;
        place-items: center;
      }

      .roulette-visual .wheel {
        width: 140px;
        height: 140px;
        border-radius: 50%;
        background: conic-gradient(#c0392b 0 25%, #1abc9c 25% 50%, #c0392b 50% 75%, #1abc9c 75% 100%);
        border: 5px solid #d4af37;
        animation: wheel-spin 3.2s linear infinite;
      }

      .roulette-visual .ball {
        position: absolute;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #f8e7b3;
        top: 8px;
        left: 50%;
        transform: translateX(-50%);
        animation: ball-orbit 3.2s linear infinite;
      }

      @keyframes wheel-spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      @keyframes ball-orbit {
        0% { transform: translateX(-50%) rotate(0deg) translateY(-42px); }
        100% { transform: translateX(-50%) rotate(-360deg) translateY(-42px); }
      }

      .dice-visual {
        font-size: 40px;
        margin: 10px 0;
        animation: dice-bounce 1.8s ease-in-out infinite;
      }

      @keyframes dice-bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
      }



      .world-map {
        grid-column: 1 / -1;
        background: linear-gradient(180deg, #e9f4ff, #cfe6ff);
        border: 3px solid #87b7e6;
        border-radius: 16px;
        padding: 16px;
      }

      .map-panel {
        position: relative;
        height: 220px;
        border-radius: 12px;
        background: radial-gradient(circle at 20% 40%, rgba(62, 135, 196, 0.25), transparent 45%),
          radial-gradient(circle at 70% 50%, rgba(62, 135, 196, 0.25), transparent 45%),
          linear-gradient(180deg, #bfe3ff, #90c7f3);
        border: 2px solid #6ea6d6;
        overflow: hidden;
      }

      .continent {
        position: absolute;
        background: #8bcf88;
        border-radius: 30% 40% 35% 45%;
        opacity: 0.9;
      }

      .continent.a { left: 12%; top: 25%; width: 120px; height: 80px; }
      .continent.b { left: 45%; top: 20%; width: 140px; height: 90px; }
      .continent.c { left: 70%; top: 45%; width: 110px; height: 70px; }

      .country-chip {
        position: absolute;
        font-size: 22px;
        display: none;
        align-items: center;
        gap: 4px;
        transform: translate(-50%, -50%);
      }

      .country-chip .flag {
        display: inline-block;
        margin-left: 4px;
        padding: 2px 4px;
        font-size: 9px;
        font-weight: 800;
        color: #fff;
        background: #c61f1f;
        border-radius: 4px;
        border: 1px solid #8f1414;
      }

      .map-shop {
        display: grid;
        gap: 10px;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        margin-top: 10px;
      }

      .map-shop button {
        border: 2px solid #3b7d4a;
        background: #eef9f0;
        color: #2b2b2b;
        padding: 8px 10px;
        border-radius: 10px;
        font-weight: 700;
        cursor: pointer;
      }

      .map-shop button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .map-pop {
        animation: map-pop 0.5s ease;
      }

      @keyframes map-pop {
        0% { transform: scale(0.6); opacity: 0.3; }
        60% { transform: scale(1.2); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
      }



      .mini-menu {
        grid-column: 1 / -1;
        background: linear-gradient(135deg, #fff7ed, #f3e2c7);
        border: 2px solid #e2c8a1;
        border-radius: 18px;
        padding: 16px;
        display: grid;
        gap: 12px;
      }

      .mini-menu h3 {
        margin: 0;
        font-size: 18px;
        letter-spacing: 0.5px;
      }

      .mini-menu-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 10px;
      }

      .mini-tile {
        background: #fff;
        border: 2px solid #ead2ad;
        border-radius: 12px;
        padding: 12px;
        display: grid;
        gap: 6px;
        align-items: center;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
        cursor: pointer;
      }

      .mini-tile:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 14px rgba(0,0,0,0.12);
      }

      .mini-tile .label {
        font-weight: 700;
      }

      .mini-tile .sub {
        font-size: 12px;
        color: #6b6358;
      }



                                                      .top-pipe::after {
        bottom: -14px;
      }

      .bottom-pipe::after {
        top: -14px;
      }

            .enemy-status {
        display: grid;
        gap: 6px;
        font-size: 13px;
        color: #5c5348;
        margin-top: 6px;
      }

      @media (max-width: 880px) {
        .page {
          grid-template-columns: 1fr;
        }
        header {
          flex-direction: column;
          gap: 10px;
          text-align: center;
        }
        .stats {
          text-align: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <h1>Kippen Klikker</h1>
        <img class="header-logo" src="fish.png" alt="Kippen Klikker logo" />
        <div class="stats">
          <div><strong>üì¶ Kippen</strong>: <span id="chicken-count">0</span></div>
          <div><strong>üí∞ Kippencoins</strong>: <span id="coins">0</span></div>
          <div><strong>‚è±Ô∏è Inkomen/sec</strong>: <span id="income">0</span></div>
          <div><strong>üåæ Farms</strong>: <span id="farm-count">0</span></div>
          <div><strong>üëΩ Alien kippen</strong>: <span id="alien-count">0</span>/10 ¬∑ (zuurstof <span id="alien-oxygen">0s</span>)</div>
        </div>
      </header>

      <section class="panel clicker">
        <button id="click-btn"><span class="rainbow-text">Klik voor een kip!</span></button>
        <div class="subtext">
          Elke klik laat een kip over het veld rennen en verdient kippencoins.
        </div>
        <div class="hint">
          Tip: elke kip verhoogt je inkomsten per seconde. Upgrades maken dat n√≥g sterker.
        </div>
        <div class="hint danger">
          Pas op: de dikke wolf valt je kippen aan! Koop turrets om hem af te schrikken.
        </div>
        <div class="hint">
          Prestige kost 5000 coins: reset voor stijlvolle kippen.
        </div>
        <button id="prestige-btn" class="prestige-btn">Prestige (5000)</button>
        <button id="spaceship-btn" class="spaceship-btn">Koop ruimteschip (20000)</button>

        <section class="mini-menu" id="mini-menu">
          <h3>Mini-games</h3>
          <div class="mini-menu-grid">
            <div class="mini-tile" data-target="casino">
              <div class="label">Casino</div>
              <div class="sub">Slots ¬∑ Roulette ¬∑ Dobbel</div>
            </div>
            <div class="mini-tile" data-target="map">
              <div class="label">Wereldkaart</div>
              <div class="sub">Koop landen</div>
            </div>
            <div class="mini-tile" data-target="farms">
              <div class="label">Farms</div>
              <div class="sub">Kippen & KFC</div>
            </div>
          </div>
        </section>
      </section>

      <section class="panel">
        <div class="field" id="field">
          <div class="wolf" id="wolf">
            <div class="wolf-sprite">
              <div class="body"></div>
              <div class="shoulder"></div>
              <div class="head"></div>
              <div class="snout"></div>
              <div class="ear"></div>
              <div class="ear right"></div>
              <div class="eye"></div>
              <div class="fang"></div>
              <div class="tail"></div>
              <div class="leg front"></div>
              <div class="leg front back"></div>
              <div class="leg rear"></div>
              <div class="leg rear back"></div>
              <div class="ui">
                <div class="label">Dikke Wolf</div>
                <div class="health"><span id="wolf-health"></span></div>
              </div>
            </div>
          </div>
          <div class="pig" id="pig">
            <div class="pig-sprite">
              <div class="body"></div>
              <div class="head"></div>
              <div class="snout"></div>
              <div class="ear"></div>
              <div class="ear right"></div>
              <div class="eye"></div>
              <div class="leg front"></div>
              <div class="leg front back"></div>
              <div class="leg rear"></div>
              <div class="leg rear back"></div>
              <div class="ui">
                <div class="label">Kapot Dik Varken</div>
                <div class="health"><span id="pig-health"></span></div>
              </div>
            </div>
          </div>
          <div class="rat" id="rat">
            <div class="rat-body">
              <div class="rat-tail"></div>
              <div class="rat-head">
                <div class="rat-ear"></div>
                <div class="rat-eye left"></div>
                <div class="rat-eye right"></div>
              </div>
              <div class="ui">
                <div class="label">Mega Rat</div>
                <div class="health"><span id="rat-health"></span></div>
              </div>
            </div>
          </div>
        </div>
        <div class="enemy-status">
          <div>üê∫ Wolf cooldown (60s): <span id="wolf-cooldown">0s</span></div>
          <div>üê∑ Varken cooldown (60s): <span id="pig-cooldown">0s</span></div>
          <button id="rat-trigger" class="rat-trigger">Trigger Rat Boss (+10000)</button>
        </div>
      </section>

      <section class="panel upgrades">
        <div class="upgrade">
          <strong>Voerautomaat</strong>
          <div class="hint">+1 passief inkomen per seconde.</div>
          <button id="upgrade-passive">Koop (Kosten: <span id="cost-passive">25</span>)</button>
        </div>
        <div class="upgrade">
          <strong>Gouden Graankorrels</strong>
          <div class="hint">+1 inkomen per kip per seconde.</div>
          <button id="upgrade-per-chicken">Koop (Kosten: <span id="cost-per-chicken">40</span>)</button>
        </div>
        <div class="upgrade">
          <strong>Super Snavel</strong>
          <div class="hint">+1 coin per klik.</div>
          <button id="upgrade-click">Koop (Kosten: <span id="cost-click">30</span>)</button>
        </div>
        <div class="upgrade">
          <strong>Turret</strong>
          <div class="hint">Schiet automatisch op de dikke wolf.</div>
          <button id="buy-turret">Koop (Kosten: <span id="cost-turret">60</span>)</button>
        </div>
        <div class="upgrade">
          <strong>Crystal Meth Kippen</strong>
          <div class="hint">Supersnelle kippen die van kleur veranderen en vijanden aanvallen.</div>
          <button id="buy-meth">Koop (Kosten: <span id="cost-meth">150</span>)</button>
        </div>
      </section>

      <section class="panel farms">
        <div class="upgrade">
          <strong>Kippenfarm</strong>
          <div class="hint">Elke farm geeft 10 kippen per minuut. Cap: 10 + 10 per land (nu: <span id="farm-cap">10</span>).</div>
          <button id="buy-farm">Koop (Kosten: <span id="cost-farm">120</span>)</button>
        </div>

        <div class="upgrade">
          <strong>KFC</strong>
          <div class="hint">Elke KFC geeft 25 kippen per minuut.</div>
          <button id="buy-kfc">Koop (Kosten: <span id="cost-kfc">450</span>)</button>
        </div>

        <div class="farm-yard">
          <div class="farm-grid" id="farm-grid"></div>
        </div>
      </section>




      
      <section class="world-map" id="world-map">
        <strong>Wereldkaart</strong>
        <div class="hint">Koop landen en zet er je kip-crew neer.</div>
        <div class="map-panel" id="map-panel">
          <div class="continent a"></div>
          <div class="continent b"></div>
          <div class="continent c"></div>
          <div class="country-chip" id="chip-nl" style="left: calc(12% + 60px); top: calc(25% + 40px);">üêî<span class="flag">KFC</span></div>
          <div class="country-chip" id="chip-usa" style="left: calc(45% + 70px); top: calc(20% + 45px);">üêî<span class="flag">KFC</span></div>
          <div class="country-chip" id="chip-jp" style="left: calc(70% + 55px); top: calc(45% + 35px);">üêî<span class="flag">KFC</span></div>
        </div>
        <div class="map-shop">
          <button id="buy-nl">Koop Nederland (Kosten: 300)</button>
          <button id="buy-usa">Koop USA (Kosten: 600)</button>
          <button id="buy-jp">Koop Japan (Kosten: 800)</button>
        </div>
      </section>

      <section class="casino-lounge" id="casino-lounge">
        <h2>Casino</h2>
        <div class="hint">Gebruik je kippencoins in mini-games.</div>
        <div class="casino-games">
          <div class="casino-card">
            <strong>Slots</strong>
            <div class="hint">Inzet: 20% van je coins.</div>
            <div class="slots-visual">
              <div class="reel">üçí</div>
              <div class="reel">üíé</div>
              <div class="reel">üîî</div>
            </div>
            <button id="play-slots">Speel Slots</button>
            <div class="casino-result" id="slots-result"></div>
          </div>
          <div class="casino-card">
            <strong>Roulette</strong>
            <div class="hint">Inzet: 20% van je coins.</div>
            <div class="roulette-visual">
              <div class="wheel"></div>
              <div class="ball"></div>
            </div>
            <button id="play-roulette">Draai Roulette</button>
            <div class="casino-result" id="roulette-result"></div>
          </div>
          <div class="casino-card">
            <strong>Dobbel</strong>
            <div class="hint">Inzet: 20% van je coins.</div>
            <div class="dice-visual">üé≤</div>
            <button id="play-dice">Gooi Dobbel</button>
            <div class="casino-result" id="dice-result"></div>
          </div>
        </div>
      </section>


      

    </div>

    <script>
      const coinsEl = document.getElementById("coins");
      const chickensEl = document.getElementById("chicken-count");
      const incomeEl = document.getElementById("income");
      const farmsEl = document.getElementById("farm-count");
      const alienEl = document.getElementById("alien-count");
      const alienOxygenEl = document.getElementById("alien-oxygen");
      const fieldEl = document.getElementById("field");
      const wolfEl = document.getElementById("wolf");
      const wolfHealthEl = document.getElementById("wolf-health");
      const pigEl = document.getElementById("pig");
      const pigHealthEl = document.getElementById("pig-health");
      const ratEl = document.getElementById("rat");
      const ratHealthEl = document.getElementById("rat-health");
      const wolfCooldownEl = document.getElementById("wolf-cooldown");
      const pigCooldownEl = document.getElementById("pig-cooldown");
      const farmGridEl = document.getElementById("farm-grid");
      const casinoLoungeEl = document.getElementById("casino-lounge");
      const slotsResultEl = document.getElementById("slots-result");
      const rouletteResultEl = document.getElementById("roulette-result");
      const diceResultEl = document.getElementById("dice-result");
      const farmCapEl = document.getElementById("farm-cap");
      const mapPanelEl = document.getElementById("map-panel");
      const chipNl = document.getElementById("chip-nl");
      const chipUsa = document.getElementById("chip-usa");
      const chipJp = document.getElementById("chip-jp");
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      let audioUnlocked = false;

      const PRESTIGE_COST = 5000;
      const SPACESHIP_COST = 20000;
      const ALIEN_CHICKEN_CAP = 10;
      const ALIEN_COIN_PER_SEC = 10;
      const ALIEN_OXYGEN_MAX = 60;

      const state = {
        coins: 20000,
        chickens: 0,
        alienChickens: 0,
        alienOxygen: 0,
        alienArrivalActive: false,
        spaceshipOwned: false,
        clickIncome: 1,
        passiveBase: 0,
        perChicken: 0.1,
        turrets: 0,
        turretNodes: [],
        wolfHealth: 120,
        wolfMaxHealth: 120,
        wolfCooldown: 0,
        chickenNodes: [],
        wolfX: 0,
        wolfDirection: -1,
        wolfTargetX: null,
        pigHealth: 180,
        pigMaxHealth: 180,
        pigCooldown: 0,
        pigX: 0,
        pigDirection: 1,
        pigTargetX: null,
        ratHealth: 1500,
        ratMaxHealth: 1500,
        ratActive: false,
        ratX: 0,
        ratDirection: 1,
        ratTargetX: null,
        methChickens: 0,
        methChickenNodes: [],
        farms: 0,
        kfcs: 0,
        farmChickenBuffer: 0,
        prestige: 0,
        countries: { nl: false, usa: false, jp: false },
      };

      const TURRET_COST_CAP = 3000;
      const upgrades = {
        passive: { cost: 25, increment: 1, costMult: 1.35 },
        perChicken: { cost: 40, increment: 1, costMult: 1.4 },
        click: { cost: 30, increment: 1, costMult: 1.3 },
        turret: { cost: 60, increment: 1, costMult: 1.5 },
        farm: { cost: 120, increment: 1, costMult: 1.45 },
        meth: { cost: 150, increment: 1, costMult: 1.5 },
        kfc: { cost: 450, increment: 1, costMult: 1.55 },
      };

      const costEls = {
        passive: document.getElementById("cost-passive"),
        perChicken: document.getElementById("cost-per-chicken"),
        click: document.getElementById("cost-click"),
        turret: document.getElementById("cost-turret"),
        farm: document.getElementById("cost-farm"),
        meth: document.getElementById("cost-meth"),
        kfc: document.getElementById("cost-kfc"),
      };

      function formatNumber(num) {
        return Math.floor(num).toLocaleString("nl-NL");
      }

      

      function updateUI() {
        coinsEl.textContent = formatNumber(state.coins);
        chickensEl.textContent = formatNumber(state.chickens);
        incomeEl.textContent = formatNumber(getIncomePerSecond());
        farmsEl.textContent = formatNumber(state.farms);
        if (alienEl) alienEl.textContent = formatNumber(Math.min(state.alienChickens, ALIEN_CHICKEN_CAP));
        if (alienOxygenEl) {
          const oxygen = Math.max(0, Math.ceil(state.alienOxygen));
          alienOxygenEl.textContent = `${oxygen}s`;
        }
        costEls.passive.textContent = formatNumber(upgrades.passive.cost);
        costEls.perChicken.textContent = formatNumber(upgrades.perChicken.cost);
        costEls.click.textContent = formatNumber(upgrades.click.cost);
        costEls.turret.textContent = formatNumber(upgrades.turret.cost);
        costEls.farm.textContent = formatNumber(upgrades.farm.cost);
        costEls.meth.textContent = formatNumber(upgrades.meth.cost);
        costEls.kfc.textContent = formatNumber(upgrades.kfc.cost);
        updateWolfUI();
        updatePigUI();
        updateRatUI();
        if (casinoLoungeEl) {
          casinoLoungeEl.style.display = "block";
        }
        if (farmCapEl) farmCapEl.textContent = getFarmCap();
        if (chipNl) chipNl.style.display = state.countries.nl ? "block" : "none";
        if (chipUsa) chipUsa.style.display = state.countries.usa ? "block" : "none";
        if (chipJp) chipJp.style.display = state.countries.jp ? "block" : "none";
        const spaceshipBtn = document.getElementById("spaceship-btn");
        if (spaceshipBtn) {
          spaceshipBtn.textContent = state.spaceshipOwned
            ? "Ruimteschip gekocht"
            : "Koop ruimteschip (20000)";
        }
        updateButtons();
      }

      function updateButtons() {
        document.getElementById("upgrade-passive").disabled =
          state.coins < upgrades.passive.cost;
        document.getElementById("upgrade-per-chicken").disabled =
          state.coins < upgrades.perChicken.cost;
        document.getElementById("upgrade-click").disabled =
          state.coins < upgrades.click.cost;
        document.getElementById("buy-turret").disabled =
          state.coins < upgrades.turret.cost;
        document.getElementById("buy-farm").disabled =
          state.coins < upgrades.farm.cost || state.farms >= getFarmCap();
        document.getElementById("buy-meth").disabled =
          state.coins < upgrades.meth.cost;
        document.getElementById("buy-kfc").disabled =
          state.coins < upgrades.kfc.cost;
        const prestigeBtn = document.getElementById("prestige-btn");
        if (prestigeBtn) prestigeBtn.disabled = state.coins < PRESTIGE_COST;
        const spaceshipBtn = document.getElementById("spaceship-btn");
        if (spaceshipBtn) {
          spaceshipBtn.disabled = state.spaceshipOwned || state.coins < SPACESHIP_COST;
        }
        const ratBtn = document.getElementById("rat-trigger");
        if (ratBtn) ratBtn.disabled = state.ratActive;
      }

      function spawnChicken() {
        const chicken = document.createElement("div");
        chicken.className = state.prestige >= 1 ? "chicken prestige-1" : "chicken";
        chicken.style.bottom = `${24 + Math.random() * 80}px`;
        chicken.style.animationDuration = `${2.6 + Math.random() * 1.8}s`;
        chicken.innerHTML = `
          <div class="body"></div>
          <div class="beak"></div>
        `;
        chicken.addEventListener("animationend", () => {
          const index = state.chickenNodes.indexOf(chicken);
          if (index >= 0) state.chickenNodes.splice(index, 1);
          chicken.remove();
        });
        fieldEl.appendChild(chicken);
        state.chickenNodes.push(chicken);
      }

      function spawnMethChicken(targetX) {
        const chicken = document.createElement("div");
        chicken.className = state.prestige >= 1 ? "chicken meth-chicken prestige-1" : "chicken meth-chicken";
        chicken.style.bottom = `${24 + Math.random() * 100}px`;
        chicken.style.animationDuration = `${1.2 + Math.random() * 0.5}s`;
        if (typeof targetX === "number") {
          chicken.style.setProperty("--target-x", `${targetX}px`);
        }
        chicken.innerHTML = `
          <div class="body"></div>
          <div class="beak"></div>
        `;
        chicken.addEventListener("animationend", () => {
          const index = state.methChickenNodes.indexOf(chicken);
          if (index >= 0) state.methChickenNodes.splice(index, 1);
          chicken.remove();
        });
        fieldEl.appendChild(chicken);
        state.methChickenNodes.push(chicken);
      }

      function spawnTurret() {
        const turret = document.createElement("div");
        turret.className = "turret";
        const spacing = 20 + (state.turrets - 1) * 54;
        turret.style.left = `${Math.min(spacing, 260)}px`;
        turret.style.bottom = `${30 + (state.turrets % 2) * 12}px`;
        turret.dataset.hp = "3";
        turret.innerHTML = '<div class="health"><span></span></div>';
        fieldEl.appendChild(turret);
        state.turretNodes.push(turret);
      }

      function getIncomePerSecond() {
        return (
          state.passiveBase +
          state.chickens * state.perChicken +
          Math.min(state.alienChickens, ALIEN_CHICKEN_CAP) * ALIEN_COIN_PER_SEC
        );
      }


      function getFarmCap() {
        const owned = Object.values(state.countries).filter(Boolean).length;
        return 10 + owned * 10;
      }

      function getFarmChickensPerSecond() {
        return state.farms * (10 / 60) + state.kfcs * (25 / 60);
      }


      function spawnFarm() {
        const farm = document.createElement("div");
        farm.className = "farm";
        farmGridEl.appendChild(farm);
      }

      function spawnKfc() {
        const kfc = document.createElement("div");
        kfc.className = "kfc";
        farmGridEl.appendChild(kfc);
      }



      
      function damageTurret() {
        if (state.turretNodes.length === 0) return;
        const turret = state.turretNodes.shift();
        let hp = parseInt(turret.dataset.hp || "3", 10) - 1;
        const bar = turret.querySelector('.health span');
        if (bar) {
          bar.style.width = `${Math.max(0, hp) / 3 * 100}%`;
        }
        if (hp <= 0) {
          turret.remove();
          state.turrets = Math.max(0, state.turrets - 1);
        } else {
          turret.dataset.hp = String(hp);
          state.turretNodes.unshift(turret);
        }

        // Lunge at the turret position
        const tx = turret.offsetLeft + 20;
        if (state.wolfCooldown === 0) {
          state.wolfTargetX = Math.max(0, tx - 40);
          wolfEl.classList.remove("attack");
          void wolfEl.offsetWidth;
          wolfEl.classList.add("attack");
          playGrowl();
        }
        if (state.pigCooldown === 0) {
          state.pigTargetX = Math.max(0, tx - 20);
          pigEl.classList.remove("attack");
          void pigEl.offsetWidth;
          pigEl.classList.add("attack");
          playGrowl();
        }
      }


      function updateWolfUI() {
        const ratio = Math.max(state.wolfHealth, 0) / state.wolfMaxHealth;
        wolfHealthEl.style.width = `${ratio * 100}%`;
        wolfEl.style.left = `${state.wolfX}px`;
        wolfEl.style.display = state.wolfCooldown > 0 ? "none" : "block";
        wolfCooldownEl.textContent =
          state.wolfCooldown > 0 ? `${Math.ceil(state.wolfCooldown)}s` : "0s";
      }

      function updatePigUI() {
        const ratio = Math.max(state.pigHealth, 0) / state.pigMaxHealth;
        pigHealthEl.style.width = `${ratio * 100}%`;
        pigEl.style.left = `${state.pigX}px`;
        pigEl.style.display = state.pigCooldown > 0 ? "none" : "block";
        pigCooldownEl.textContent =
          state.pigCooldown > 0 ? `${Math.ceil(state.pigCooldown)}s` : "0s";
      }

      function updateRatUI() {
        if (!ratEl || !ratHealthEl) return;
        ratEl.classList.toggle("active", state.ratActive);
        const ratio = Math.max(state.ratHealth, 0) / state.ratMaxHealth;
        ratHealthEl.style.width = `${ratio * 100}%`;
        ratEl.style.left = `${state.ratX}px`;
        ratEl.setAttribute("data-dir", state.ratDirection >= 0 ? "right" : "left");
      }

      function damageWolf(amount) {
        if (state.wolfCooldown > 0) return;
        state.wolfHealth -= amount;
        hitFlash(wolfEl);
        if (state.wolfHealth <= 0) {
          state.coins += 30;
          state.wolfMaxHealth = Math.floor(state.wolfMaxHealth * 1.25 + 20);
          state.wolfHealth = state.wolfMaxHealth;
          state.wolfCooldown = 60;
        }
      }

      function damagePig(amount) {
        if (state.pigCooldown > 0) return;
        state.pigHealth -= amount;
        hitFlash(pigEl);
        if (state.pigHealth <= 0) {
          state.coins += 40;
          state.pigMaxHealth = Math.floor(state.pigMaxHealth * 1.3 + 30);
          state.pigHealth = state.pigMaxHealth;
          state.pigCooldown = 60;
        }
      }

      function damageRat(amount) {
        if (!state.ratActive) return;
        state.ratHealth -= amount;
        hitFlash(ratEl);
        if (state.ratHealth <= 0) {
          state.ratActive = false;
          state.ratHealth = state.ratMaxHealth;
        }
      }

      function initRatPosition() {
        const fieldRect = fieldEl.getBoundingClientRect();
        state.ratX = Math.max(0, fieldRect.width * 0.45);
      }

      function fireRatLaser(target) {
        const fieldRect = fieldEl.getBoundingClientRect();
        const tRect = target.getBoundingClientRect();
        const tx = tRect.left - fieldRect.left + tRect.width / 2;
        const ty = tRect.top - fieldRect.top + tRect.height / 2;
        const eyes = ratEl ? Array.from(ratEl.querySelectorAll(".rat-eye")) : [];
        const sources = eyes.length
          ? eyes.map((eye) => eye.getBoundingClientRect())
          : [null];
        sources.forEach((eyeRect) => {
          const ratX = eyeRect
            ? eyeRect.left - fieldRect.left + eyeRect.width / 2
            : state.ratX + 170;
          const ratY = eyeRect
            ? eyeRect.top - fieldRect.top + eyeRect.height / 2
            : fieldRect.height - 70;
          const dx = tx - ratX;
          const dy = ty - ratY;
          const dist = Math.max(30, Math.hypot(dx, dy));
          const angle = Math.atan2(dy, dx) * (180 / Math.PI);
          const laser = document.createElement("div");
          laser.className = "rat-laser";
          laser.style.left = `${ratX}px`;
          laser.style.top = `${ratY}px`;
          laser.style.width = `${dist}px`;
          laser.style.transform = `rotate(${angle}deg)`;
          fieldEl.appendChild(laser);
          setTimeout(() => laser.remove(), 200);
        });
      }

      function ratAttack(target) {
        fireRatLaser(target);
        const targetX = target.offsetLeft;
        state.ratTargetX = Math.max(0, targetX - 120);
        const dust = document.createElement("div");
        dust.className = "dust";
        dust.style.left = `${targetX + 18}px`;
        dust.style.bottom = `${24 + Math.random() * 40}px`;
        fieldEl.appendChild(dust);
        dust.addEventListener("animationend", () => dust.remove());
        const index = state.chickenNodes.indexOf(target);
        if (index >= 0) state.chickenNodes.splice(index, 1);
        target.remove();
      }

      function initWolfPosition() {
        const fieldRect = fieldEl.getBoundingClientRect();
        state.wolfX = Math.max(0, fieldRect.width - 160);
      }

      function initPigPosition() {
        const fieldRect = fieldEl.getBoundingClientRect();
        state.pigX = Math.max(0, fieldRect.width - 210);
      }

      function findNearbyChicken(enemyCenterX, range) {
        let closest = null;
        let closestDist = Infinity;
        const fieldRect = fieldEl.getBoundingClientRect();
        state.chickenNodes.forEach((node) => {
          const rect = node.getBoundingClientRect();
          const x = rect.left - fieldRect.left + rect.width / 2;
          const dist = Math.abs(x - enemyCenterX);
          if (dist <= range && dist < closestDist) {
            closest = node;
            closestDist = dist;
          }
        });
        return closest;
      }

      function wolfAttack(target) {
        wolfEl.classList.remove("attack");
        void wolfEl.offsetWidth;
        wolfEl.classList.add("attack");

        playGrowl();

        const targetX = target.offsetLeft;
        state.wolfTargetX = Math.max(0, targetX - 40);
        const dust = document.createElement("div");
        dust.className = "dust";
        dust.style.left = `${targetX + 18}px`;
        dust.style.bottom = `${24 + Math.random() * 40}px`;
        fieldEl.appendChild(dust);
        dust.addEventListener("animationend", () => dust.remove());
        const index = state.chickenNodes.indexOf(target);
        if (index >= 0) state.chickenNodes.splice(index, 1);
        target.remove();
      }

      function pigAttack(target) {
        pigEl.classList.remove("attack");
        void pigEl.offsetWidth;
        pigEl.classList.add("attack");
        playGrowl();

        const targetX = target.offsetLeft;
        state.pigTargetX = Math.max(0, targetX - 20);
        const dust = document.createElement("div");
        dust.className = "dust";
        dust.style.left = `${targetX + 18}px`;
        dust.style.bottom = `${24 + Math.random() * 40}px`;
        fieldEl.appendChild(dust);
        dust.addEventListener("animationend", () => dust.remove());
        const index = state.chickenNodes.indexOf(target);
        if (index >= 0) state.chickenNodes.splice(index, 1);
        target.remove();
      }

      function playGrowl() {
        unlockAudio();
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "sawtooth";
        osc.frequency.setValueAtTime(120, now);
        osc.frequency.exponentialRampToValueAtTime(70, now + 0.18);
        gain.gain.setValueAtTime(0.001, now);
        gain.gain.exponentialRampToValueAtTime(0.18, now + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.35);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now);
        osc.stop(now + 0.4);
      }

      function playCluck() {
        unlockAudio();
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "triangle";
        osc.frequency.setValueAtTime(520, now);
        osc.frequency.exponentialRampToValueAtTime(320, now + 0.12);
        gain.gain.setValueAtTime(0.001, now);
        gain.gain.exponentialRampToValueAtTime(0.12, now + 0.02);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.18);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now);
        osc.stop(now + 0.2);
      }

      function playTurret() {
        unlockAudio();
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "square";
        osc.frequency.setValueAtTime(220, now);
        osc.frequency.exponentialRampToValueAtTime(140, now + 0.08);
        gain.gain.setValueAtTime(0.001, now);
        gain.gain.exponentialRampToValueAtTime(0.08, now + 0.01);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.12);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now);
        osc.stop(now + 0.14);
      }

      function unlockAudio() {
        if (audioUnlocked) return;
        if (audioCtx.state === "suspended") {
          audioCtx.resume();
        }
        audioUnlocked = true;
      }

      function spawnBullet() {
        const turret = fieldEl.querySelector(".turret");
        if (!turret) return;
        const bullet = document.createElement("div");
        bullet.className = "bullet";
        const turretX = turret.offsetLeft + 34;
        bullet.style.left = `${turretX}px`;
        bullet.style.bottom = `${50 + Math.random() * 20}px`;
        fieldEl.appendChild(bullet);
        bullet.addEventListener("animationend", () => bullet.remove());
      }


      function pulseEl(el) {
        el.classList.remove("pulse");
        void el.offsetWidth;
        el.classList.add("pulse");
      }

      function spawnCoinBurst(el) {
        const rect = el.getBoundingClientRect();
        const burst = document.createElement("div");
        burst.className = "coin-burst";
        burst.textContent = "+$";
        burst.style.left = `${rect.left + rect.width / 2 - 6}px`;
        burst.style.top = `${rect.top - 6}px`;
        document.body.appendChild(burst);
        burst.addEventListener("animationend", () => burst.remove());
      }

      

      function showSpend(el, amount) {
        const rect = el.getBoundingClientRect();
        const spend = document.createElement("div");
        spend.className = "spend-float";
        spend.textContent = `- ${amount}`;
        spend.style.left = `${rect.left + rect.width / 2 - 10}px`;
        spend.style.top = `${rect.top - 6}px`;
        document.body.appendChild(spend);
        spend.addEventListener("animationend", () => spend.remove());
      }

      function launchRocket() {
        const rocket = document.createElement("div");
        rocket.className = "rocket";
        rocket.innerHTML = `
          <div class="rocket-body">
            <div class="rocket-nose"></div>
            <div class="rocket-window"></div>
            <div class="rocket-fin left"></div>
            <div class="rocket-fin right"></div>
            <div class="rocket-flame"></div>
          </div>
        `;
        document.body.appendChild(rocket);
        rocket.addEventListener("animationend", () => rocket.remove());
      }

      function spawnAlienRunner() {
        const chicken = document.createElement("div");
        chicken.className = "chicken alien-chicken";
        chicken.style.bottom = `${24 + Math.random() * 80}px`;
        chicken.style.animationDuration = `${2.4 + Math.random() * 1.2}s`;
        chicken.innerHTML = `
          <div class="body"></div>
          <div class="beak"></div>
        `;
        chicken.addEventListener("animationend", () => {
          chicken.remove();
          if (state.alienChickens < ALIEN_CHICKEN_CAP) {
            state.alienChickens += 1;
          }
          updateUI();
        });
        fieldEl.appendChild(chicken);
      }

      function startAlienArrival() {
        if (state.alienArrivalActive) return;
        state.alienArrivalActive = true;
        state.alienOxygen = ALIEN_OXYGEN_MAX;
        let spawned = 0;
        const tick = () => {
          if (state.alienOxygen === 0) {
            state.alienArrivalActive = false;
            return;
          }
          if (spawned >= ALIEN_CHICKEN_CAP) {
            state.alienArrivalActive = false;
            return;
          }
          spawnAlienRunner();
          spawned += 1;
          setTimeout(tick, 220);
        };
        tick();
      }

      function performPrestige() {
        if (state.coins < PRESTIGE_COST) return;
        spawnConfettiBurst(100);
        playAirhorn();
        state.coins = 0;
        state.chickens = 0;
        state.farms = 0;
        state.kfcs = 0;
        state.farmChickenBuffer = 0;
        state.prestige += 1;

        state.chickenNodes.forEach((node) => node.remove());
        state.methChickenNodes.forEach((node) => node.remove());
        state.chickenNodes = [];
        state.methChickenNodes = [];

        if (farmGridEl) farmGridEl.innerHTML = "";
        updateUI();
      }
function playDing() {
        unlockAudio();
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "sine";
        osc.frequency.setValueAtTime(740, now);
        osc.frequency.exponentialRampToValueAtTime(520, now + 0.18);
        gain.gain.setValueAtTime(0.001, now);
        gain.gain.exponentialRampToValueAtTime(0.12, now + 0.02);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.25);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now);
        osc.stop(now + 0.3);
      }



      function playCash() {
        unlockAudio();
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "triangle";
        osc.frequency.setValueAtTime(440, now);
        osc.frequency.exponentialRampToValueAtTime(220, now + 0.18);
        gain.gain.setValueAtTime(0.001, now);
        gain.gain.exponentialRampToValueAtTime(0.18, now + 0.03);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.22);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now);
        osc.stop(now + 0.25);
      }

      function playAirhorn() {
        unlockAudio();
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = "sawtooth";
        osc.frequency.setValueAtTime(220, now);
        osc.frequency.exponentialRampToValueAtTime(440, now + 0.12);
        osc.frequency.exponentialRampToValueAtTime(300, now + 0.35);
        gain.gain.setValueAtTime(0.001, now);
        gain.gain.exponentialRampToValueAtTime(0.35, now + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.6);
        osc.connect(gain).connect(audioCtx.destination);
        osc.start(now);
        osc.stop(now + 0.65);
      }
      function hitFlash(el) {
        el.classList.remove("hit-flash");
        void el.offsetWidth;
        el.classList.add("hit-flash");
      }

      function spawnSmoke(x, y) {
        const smoke = document.createElement("div");
        smoke.className = "smoke";
        smoke.style.left = `${x}px`;
        smoke.style.bottom = `${y}px`;
        fieldEl.appendChild(smoke);
        smoke.addEventListener("animationend", () => smoke.remove());
      }

      function spawnConfettiBurst(count = 80) {
        const colors = ["#ff4d6d", "#ffd166", "#06d6a0", "#118ab2", "#ef476f"];
        for (let i = 0; i < count; i += 1) {
          const piece = document.createElement("div");
          piece.className = "confetti";
          piece.style.left = `${Math.random() * 100}vw`;
          piece.style.background = colors[i % colors.length];
          piece.style.animationDelay = `${Math.random() * 0.3}s`;
          piece.style.transform = `rotate(${Math.random() * 360}deg)`;
          piece.style.width = `${6 + Math.random() * 8}px`;
          piece.style.height = `${8 + Math.random() * 10}px`;
          document.body.appendChild(piece);
          piece.addEventListener("animationend", () => piece.remove());
        }
      }

      function showBossWarning() {
        const warning = document.createElement("div");
        warning.className = "boss-warning";
        warning.textContent = "BOSS FIGHT!";
        document.body.appendChild(warning);
        warning.addEventListener("animationend", () => warning.remove());
      }

      document.getElementById("click-btn").addEventListener("click", () => {
        state.coins += state.clickIncome;
        state.chickens += 1;
        spawnChicken();
        playCluck();
        updateUI();
      });

      document.getElementById("upgrade-passive").addEventListener("click", () => {
        const upgrade = upgrades.passive;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("upgrade-passive"));
        pulseEl(document.getElementById("upgrade-passive"));
        state.passiveBase += upgrade.increment;
        upgrade.cost = Math.ceil(upgrade.cost * upgrade.costMult);
        updateUI();
      });

      document.getElementById("upgrade-per-chicken").addEventListener("click", () => {
        const upgrade = upgrades.perChicken;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("upgrade-per-chicken"));
        pulseEl(document.getElementById("upgrade-per-chicken"));
        state.perChicken += upgrade.increment;
        upgrade.cost = Math.ceil(upgrade.cost * upgrade.costMult);
        updateUI();
      });

      document.getElementById("upgrade-click").addEventListener("click", () => {
        const upgrade = upgrades.click;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("upgrade-click"));
        pulseEl(document.getElementById("upgrade-click"));
        state.clickIncome += upgrade.increment;
        upgrade.cost = Math.ceil(upgrade.cost * upgrade.costMult);
        updateUI();
      });

      document.getElementById("buy-turret").addEventListener("click", () => {
        const upgrade = upgrades.turret;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("buy-turret"));
        pulseEl(document.getElementById("buy-turret"));
        state.turrets += upgrade.increment;
        spawnTurret();
        upgrade.cost = Math.min(
          TURRET_COST_CAP,
          Math.ceil(upgrade.cost * upgrade.costMult)
        );
        updateUI();
      });

      document.getElementById("buy-farm").addEventListener("click", () => {
        const upgrade = upgrades.farm;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("buy-farm"));
        pulseEl(document.getElementById("buy-farm"));
        state.farms += upgrade.increment;
        spawnFarm();
        upgrade.cost = Math.ceil(upgrade.cost * upgrade.costMult);
        updateUI();
      });

      document.getElementById("buy-kfc").addEventListener("click", () => {
        const upgrade = upgrades.kfc;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("buy-kfc"));
        pulseEl(document.getElementById("buy-kfc"));
        state.kfcs += upgrade.increment;
        spawnKfc();
        upgrade.cost = Math.ceil(upgrade.cost * upgrade.costMult);
        updateUI();
      });

      document.getElementById("buy-meth").addEventListener("click", () => {
        const upgrade = upgrades.meth;
        if (state.coins < upgrade.cost) return;
        state.coins -= upgrade.cost;
        playDing();
        spawnCoinBurst(document.getElementById("buy-meth"));
        pulseEl(document.getElementById("buy-meth"));
        state.methChickens += upgrade.increment;
        spawnMethChicken();
        upgrade.cost = Math.ceil(upgrade.cost * upgrade.costMult);
        updateUI();
      });

      document.getElementById("rat-trigger").addEventListener("click", () => {
        if (state.ratActive) return;
        state.coins += 10000;
        state.ratActive = true;
        state.ratHealth = state.ratMaxHealth;
        initRatPosition();
        showBossWarning();
        playDing();
        updateUI();
      });

      document.getElementById("prestige-btn").addEventListener("click", () => {
        if (state.coins < PRESTIGE_COST) return;
        showSpend(document.getElementById("prestige-btn"), PRESTIGE_COST);
        playDing();
        performPrestige();
      });

      document.getElementById("spaceship-btn").addEventListener("click", () => {
        if (state.spaceshipOwned || state.coins < SPACESHIP_COST) return;
        state.coins -= SPACESHIP_COST;
        state.spaceshipOwned = true;
        state.alienChickens = 0;
        showSpend(document.getElementById("spaceship-btn"), SPACESHIP_COST);
        playDing();
        launchRocket();
        startAlienArrival();
        updateUI();
      });



      function canSpend(cost) {
        return state.coins >= cost;
      }

      function getCasinoCost() {
        return Math.floor(state.coins * 0.2);
      }

      document.getElementById("play-slots")?.addEventListener("click", () => {
        const cost = getCasinoCost();
        if (!canSpend(cost) || cost <= 0) return;
        state.coins -= cost;
        showSpend(document.getElementById("play-dice"), cost);
        showSpend(document.getElementById("play-roulette"), cost);
        showSpend(document.getElementById("play-slots"), cost);
        const roll = Math.random();
        let win = 0;
        if (roll > 0.92) win = 80;
        else if (roll > 0.72) win = 40;
        state.coins += win;
        playCash();
        slotsResultEl.textContent = win ? `Je wint ${win} coins!` : "Geen winst deze keer.";
        updateUI();
      });

      document.getElementById("play-roulette")?.addEventListener("click", () => {
        const cost = getCasinoCost();
        if (!canSpend(cost) || cost <= 0) return;
        state.coins -= cost;
        showSpend(document.getElementById("play-slots"), cost);
        const roll = Math.random();
        let win = 0;
        if (roll > 0.95) win = 120;
        else if (roll > 0.75) win = 60;
        state.coins += win;
        playCash();
        rouletteResultEl.textContent = win ? `Je wint ${win} coins!` : "Verloren, draai opnieuw.";
        updateUI();
      });

      document.getElementById("play-dice")?.addEventListener("click", () => {
        const cost = getCasinoCost();
        if (!canSpend(cost) || cost <= 0) return;
        state.coins -= cost;
        showSpend(document.getElementById("play-slots"), cost);
        const roll = Math.ceil(Math.random() * 6);
        let win = 0;
        if (roll >= 6) win = 50;
        else if (roll >= 4) win = 20;
        state.coins += win;
        playCash();
        diceResultEl.textContent = win ? `Je rolt ${roll} en wint ${win} coins!` : `Je rolt ${roll}. Geen winst.`;
        updateUI();
      });



      document.getElementById("buy-nl")?.addEventListener("click", () => {
        const cost = 300;
        if (state.coins < cost || state.countries.nl) return;
        state.coins -= cost;
        state.countries.nl = true;
        updateUI();
        if (chipNl) {
          chipNl.classList.remove("map-pop");
          void chipNl.offsetWidth;
          chipNl.classList.add("map-pop");
        }
      });

      document.getElementById("buy-usa")?.addEventListener("click", () => {
        const cost = 600;
        if (state.coins < cost || state.countries.usa) return;
        state.coins -= cost;
        state.countries.usa = true;
        updateUI();
        if (chipUsa) {
          chipUsa.classList.remove("map-pop");
          void chipUsa.offsetWidth;
          chipUsa.classList.add("map-pop");
        }
      });

      document.getElementById("buy-jp")?.addEventListener("click", () => {
        const cost = 800;
        if (state.coins < cost || state.countries.jp) return;
        state.coins -= cost;
        state.countries.jp = true;
        updateUI();
        if (chipJp) {
          chipJp.classList.remove("map-pop");
          void chipJp.offsetWidth;
          chipJp.classList.add("map-pop");
        }
      });

      document.querySelectorAll(".mini-tile").forEach((tile) => {
        tile.addEventListener("click", () => {
          const target = tile.dataset.target;
          const map = {
            casino: document.getElementById("casino-lounge"),
            map: document.getElementById("world-map"),
            farms: document.querySelector(".panel.farms"),
          };
          const el = map[target];
          if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
        });
      });



            let lastTime = performance.now();
      let wolfTimer = 0;
      let pigTimer = 0;
      let ratTimer = 0;
      let turretTimer = 0;
      let turretDamageTimer = 0;
      let methTimer = 0;
      let smokeTimer = 0;
      function gameLoop(now) {
        const delta = (now - lastTime) / 1000;
        lastTime = now;
        state.coins += getIncomePerSecond() * delta;
        if (state.alienOxygen > 0) {
          state.alienOxygen = Math.max(0, state.alienOxygen - delta);
          if (state.alienOxygen === 0) {
            state.alienChickens = 0;
            state.alienArrivalActive = false;
          }
        }
        state.farmChickenBuffer += getFarmChickensPerSecond() * delta;
        if (state.farmChickenBuffer >= 1) {
          const newChickens = Math.floor(state.farmChickenBuffer);
          state.farmChickenBuffer -= newChickens;
          state.chickens += newChickens;
        }
        wolfTimer += delta;
        pigTimer += delta;
        ratTimer += delta;
        turretTimer += delta;
        turretDamageTimer += delta;
        methTimer += delta;
        smokeTimer += delta;
        if (state.wolfCooldown > 0) {
          state.wolfCooldown = Math.max(0, state.wolfCooldown - delta);
        }
        if (state.pigCooldown > 0) {
          state.pigCooldown = Math.max(0, state.pigCooldown - delta);
        }

        if (state.wolfCooldown === 0 && wolfTimer >= 1.4 && state.chickens > 0) {
          const wolfCenter = state.wolfX + 90;
          const target = findNearbyChicken(wolfCenter, 120);
          if (target) {
            wolfTimer = 0;
            state.chickens = Math.max(0, state.chickens - 1);
            wolfAttack(target);
          }
        }

        if (state.pigCooldown === 0 && pigTimer >= 1.8 && state.chickens > 0) {
          const pigCenter = state.pigX + 85;
          const target = findNearbyChicken(pigCenter, 120);
          if (target) {
            pigTimer = 0;
            state.chickens = Math.max(0, state.chickens - 1);
            pigAttack(target);
          }
        }

        if (state.ratActive && ratTimer >= 1.2 && state.chickens > 0) {
          const ratCenter = state.ratX + 120;
          const target = findNearbyChicken(ratCenter, 160);
          if (target) {
            ratTimer = 0;
            state.chickens = Math.max(0, state.chickens - 1);
            ratAttack(target);
          }
        }

        
        const anyEnemyActive = state.wolfCooldown == 0 || state.pigCooldown == 0 || state.ratActive;

        if (state.turrets > 0 && turretDamageTimer >= 2.2 && anyEnemyActive) {
          turretDamageTimer = 0;
          damageTurret();
        }

if (state.turrets > 0 && turretTimer >= 0.9 && anyEnemyActive) {
          turretTimer = 0;
          damageWolf(state.turrets * 2);
          damagePig(Math.ceil(state.turrets * 1.5));
          damageRat(Math.ceil(state.turrets * 1.2));
          playTurret();
          spawnBullet();
        }

        
        if (state.kfcs > 0 && smokeTimer >= 1.6) {
          smokeTimer = 0;
          const kfcs = Array.from(farmGridEl.querySelectorAll(".kfc"));
          if (kfcs.length > 0) {
            const kfc = kfcs[Math.floor(Math.random() * kfcs.length)];
            const x = kfc.offsetLeft + 20;
            spawnSmoke(x, 28);
          }
        }

        if (state.methChickens > 0 && methTimer >= 0.7) {
          methTimer = 0;

          const targets = [];
          if (state.wolfCooldown === 0) {
            targets.push({ type: "wolf", x: state.wolfX + 90 });
          }
          if (state.pigCooldown === 0) {
            targets.push({ type: "pig", x: state.pigX + 85 });
          }
          if (state.ratActive && ratEl) {
            targets.push({ type: "rat", x: ratEl.offsetLeft + 120 });
          }

          let target = null;
          if (targets.length > 0) {
            target = targets.sort((a, b) => a.x - b.x)[0];
          }

          if (state.methChickenNodes.length < state.methChickens) {
            spawnMethChicken(target ? target.x : undefined);
          }

          if (target) {
            const travelTime = Math.max(0.2, (target.x + 80) / 500);
            setTimeout(() => {
              if (target.type === "wolf" && state.wolfCooldown === 0) {
                damageWolf(1);
              }
              if (target.type === "pig" && state.pigCooldown === 0) {
                damagePig(1);
              }
              if (target.type === "rat" && state.ratActive) {
                damageRat(1);
              }
            }, travelTime * 1000);
          }
        }

        const fieldRect = fieldEl.getBoundingClientRect();
        const maxX = Math.max(0, fieldRect.width - 160);
        const wolfSpeed = 60;

        if (state.wolfCooldown === 0 && state.wolfTargetX !== null) {
          const dir = Math.sign(state.wolfTargetX - state.wolfX);
          state.wolfX += dir * wolfSpeed * 2 * delta;
          wolfEl.style.setProperty("--dir", dir >= 0 ? -1 : 1);
          wolfEl.setAttribute("data-dir", dir >= 0 ? "right" : "left");
          if (Math.abs(state.wolfTargetX - state.wolfX) < 6) {
            state.wolfTargetX = null;
          }
        } else if (state.wolfCooldown === 0) {
          state.wolfX += state.wolfDirection * wolfSpeed * delta;
          wolfEl.style.setProperty("--dir", state.wolfDirection >= 0 ? -1 : 1);
          wolfEl.setAttribute("data-dir", state.wolfDirection >= 0 ? "right" : "left");
          if (state.wolfX <= 0) {
            state.wolfX = 0;
            state.wolfDirection = 1;
          }
          if (state.wolfX >= maxX) {
            state.wolfX = maxX;
            state.wolfDirection = -1;
          }
        }

        const pigMaxX = Math.max(0, fieldRect.width - 190);
        const pigSpeed = 45;
        if (state.pigCooldown === 0 && state.pigTargetX !== null) {
          const dir = Math.sign(state.pigTargetX - state.pigX);
          state.pigX += dir * pigSpeed * 2 * delta;
          pigEl.style.setProperty("--dir", dir >= 0 ? -1 : 1);
          pigEl.setAttribute("data-dir", dir >= 0 ? "right" : "left");
          if (Math.abs(state.pigTargetX - state.pigX) < 6) {
            state.pigTargetX = null;
          }
        } else if (state.pigCooldown === 0) {
          state.pigX += state.pigDirection * pigSpeed * delta;
          pigEl.style.setProperty("--dir", state.pigDirection >= 0 ? -1 : 1);
          pigEl.setAttribute("data-dir", state.pigDirection >= 0 ? "right" : "left");
          if (state.pigX <= 0) {
            state.pigX = 0;
            state.pigDirection = 1;
          }
          if (state.pigX >= pigMaxX) {
            state.pigX = pigMaxX;
            state.pigDirection = -1;
          }
        }

        const ratMaxX = Math.max(0, fieldRect.width - 240);
        const ratSpeed = 35;
        if (state.ratActive && state.ratTargetX !== null) {
          const dir = Math.sign(state.ratTargetX - state.ratX);
          if (dir !== 0) state.ratDirection = dir;
          state.ratX += dir * ratSpeed * 2 * delta;
          if (Math.abs(state.ratTargetX - state.ratX) < 6) {
            state.ratTargetX = null;
          }
        } else if (state.ratActive) {
          state.ratX += state.ratDirection * ratSpeed * delta;
          if (state.ratX <= 0) {
            state.ratX = 0;
            state.ratDirection = 1;
          }
          if (state.ratX >= ratMaxX) {
            state.ratX = ratMaxX;
            state.ratDirection = -1;
          }
        }

        updateUI();
        requestAnimationFrame(gameLoop);
      }

      updateUI();
      initWolfPosition();
      initPigPosition();
      initRatPosition();
      window.addEventListener("resize", initWolfPosition);
      window.addEventListener("resize", initPigPosition);
      window.addEventListener("resize", initRatPosition);
      requestAnimationFrame(gameLoop);
    </script>
  </body>
</html>
